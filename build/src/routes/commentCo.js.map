{"version":3,"file":"commentCo.js","names":["router","Router","post","authentication","req","res","blogId","params","blog","Blog","findById","status","json","message","comment","text","body","author","comments","push","savedBlog","save","err","get","Comment","find","send","error"],"sources":["../../../src/routes/commentCo.js"],"sourcesContent":["import  Router  from 'express';\r\nconst router = Router();\r\nimport Comment from \"../models/comment.model.js\";\r\nimport Blog from \"../models/Post.js\";\r\nimport authorizeUser from \"../middlewires/middleware.js\"\r\nimport authentication from \"../middlewires/mustHveAccount.js\";\r\n\r\nrouter.post('/blogs/:blogId/comments',authentication, async (req, res) => {\r\n  const blogId = req.params.blogId;\r\n\r\n  try {\r\n    const blog = await Blog.findById(blogId);\r\n    if (!blog) {\r\n      return res.status(404).json({ message: 'Blog not found' });\r\n    }\r\n\r\n    const comment = {\r\n      text: req.body.text,\r\n      author: req.body.author\r\n    };\r\n\r\n    blog.comments.push(comment);\r\n    const savedBlog = await blog.save();\r\n\r\n    return res.status(201).json(savedBlog);\r\n  } catch (err) {\r\n    return res.status(500).json({ message: err.message });\r\n  }\r\n    // const blogId = req.params.blogId;\r\n    // try {\r\n    //   const blog = await Blog.findById(blogId);\r\n    //   if (!blog) {\r\n    //     return res.status(400).send({ error: 'Invalid blogId' });\r\n    //   }\r\n    //   const comment = new Comment({\r\n    //     blogId: blogId,\r\n    //     author: req.body.author,\r\n    //     content: req.body.content,\r\n    //   });\r\n    //   await comment.save();\r\n    //   res.status(201).send({ message: 'Comment added successfully' });\r\n    // } catch (error) {\r\n    //   res.status(400).send({ message: \"this Blog is no longer exists\" });\r\n    // }\r\n  });\r\n\r\n//   getall comments=======================\r\n\r\n\r\nrouter.get('/blogs/:blogId/comments',authentication, async (req, res) => {\r\n    const blogId = req.params.blogId;\r\n    try {\r\n      const comments = await Comment.find({ blogId: blogId });\r\n      return res.send(comments);\r\n    } catch (error) {\r\n      return res.status(400).send({ error: error.message });\r\n    }\r\n  });\r\n\r\n  export default router;"],"mappings":";;;;;;AAAA;AAEA;AACA;AACA;AACA;AAA8D;AAJ9D,MAAMA,MAAM,GAAG,IAAAC,gBAAM,GAAE;AAMvBD,MAAM,CAACE,IAAI,CAAC,yBAAyB,EAACC,uBAAc,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACxE,MAAMC,MAAM,GAAGF,GAAG,CAACG,MAAM,CAACD,MAAM;EAEhC,IAAI;IACF,MAAME,IAAI,GAAG,MAAMC,aAAI,CAACC,QAAQ,CAACJ,MAAM,CAAC;IACxC,IAAI,CAACE,IAAI,EAAE;MACT,OAAOH,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAiB,CAAC,CAAC;IAC5D;IAEA,MAAMC,OAAO,GAAG;MACdC,IAAI,EAAEX,GAAG,CAACY,IAAI,CAACD,IAAI;MACnBE,MAAM,EAAEb,GAAG,CAACY,IAAI,CAACC;IACnB,CAAC;IAEDT,IAAI,CAACU,QAAQ,CAACC,IAAI,CAACL,OAAO,CAAC;IAC3B,MAAMM,SAAS,GAAG,MAAMZ,IAAI,CAACa,IAAI,EAAE;IAEnC,OAAOhB,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACQ,SAAS,CAAC;EACxC,CAAC,CAAC,OAAOE,GAAG,EAAE;IACZ,OAAOjB,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAES,GAAG,CAACT;IAAQ,CAAC,CAAC;EACvD;EACE;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACF,CAAC,CAAC;;AAEJ;;AAGAb,MAAM,CAACuB,GAAG,CAAC,yBAAyB,EAACpB,uBAAc,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACrE,MAAMC,MAAM,GAAGF,GAAG,CAACG,MAAM,CAACD,MAAM;EAChC,IAAI;IACF,MAAMY,QAAQ,GAAG,MAAMM,qBAAO,CAACC,IAAI,CAAC;MAAEnB,MAAM,EAAEA;IAAO,CAAC,CAAC;IACvD,OAAOD,GAAG,CAACqB,IAAI,CAACR,QAAQ,CAAC;EAC3B,CAAC,CAAC,OAAOS,KAAK,EAAE;IACd,OAAOtB,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACe,IAAI,CAAC;MAAEC,KAAK,EAAEA,KAAK,CAACd;IAAQ,CAAC,CAAC;EACvD;AACF,CAAC,CAAC;AAAC,eAEYb,MAAM;AAAA"}